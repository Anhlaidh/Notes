<!DOCTYPE html SYSTEM "about:legacy-compat">
<html lang="en-US" data-preset="contrast" data-primary-color="#307FFF"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8"><meta name="built-on" content="2024-04-30T19:18:20.877069"><title>Table of Contents | Notes</title><script type="application/json" id="virtual-toc-data">[{"id":"mysql","level":0,"title":"MySQL","anchor":"#mysql"},{"id":"po1oey_1591","level":0,"title":"介绍","anchor":"#po1oey_1591"},{"id":"po1oey_1710","level":0,"title":"常用命令","anchor":"#po1oey_1710"}]</script><script type="application/json" id="topic-shortcuts"></script><link href="https://resources.jetbrains.com/writerside/apidoc/6.10.0-b259/app.css" rel="stylesheet"><meta name="msapplication-TileColor" content="#000000"><link rel="apple-touch-icon" sizes="180x180" href="https://jetbrains.com/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="https://jetbrains.com/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="https://jetbrains.com/favicon-16x16.png"><meta name="msapplication-TileImage" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-144x144.png"><meta name="msapplication-square70x70logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-70x70.png"><meta name="msapplication-square150x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-150x150.png"><meta name="msapplication-wide310x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x150.png"><meta name="msapplication-square310x310logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x310.png"><meta name="image" content=""><!-- Open Graph --><meta property="og:title" content="Table of Contents | Notes"><meta property="og:description" content=""><meta property="og:image" content=""><meta property="og:site_name" content="Notes Help"><meta property="og:type" content="website"><meta property="og:locale" content="en_US"><meta property="og:url" content="writerside-documentation/notes/0.1/mysql.html"><!-- End Open Graph --><!-- Twitter Card --><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content=""><meta name="twitter:title" content="Table of Contents | Notes"><meta name="twitter:description" content=""><meta name="twitter:creator" content=""><meta name="twitter:image:src" content=""><!-- End Twitter Card --><!-- Schema.org WebPage --><script type="application/ld+json">{
    "@context": "http://schema.org",
    "@type": "WebPage",
    "@id": "writerside-documentation/notes/0.1/mysql.html#webpage",
    "url": "writerside-documentation/notes/0.1/mysql.html",
    "name": "Table of Contents | Notes",
    "description": "",
    "image": "",
    "inLanguage":"en-US"
}</script><!-- End Schema.org --><!-- Schema.org WebSite --><script type="application/ld+json">{
    "@type": "WebSite",
    "@id": "writerside-documentationnotes/#website",
    "url": "writerside-documentationnotes/",
    "name": "Notes Help"
}</script><!-- End Schema.org --></head><body data-id="MySQL" data-main-title="Table of Contents" data-article-props="{&quot;seeAlsoStyle&quot;:&quot;links&quot;}" data-template="article" data-breadcrumbs="README.md|Notes///java///notes///DB"><div class="wrapper"><main class="panel _main"><header class="panel__header"><div class="container"><h3>Notes 0.1 Help</h3><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="MySQL" id="MySQL.md">Table of Contents</h1><ul class="list _bullet" id="po1oey_1562"><li class="list__item" id="po1oey_1563"><p><span id="po1oey_1564">MySQL</span>* <span id="po1oey_1565">Table of Contents</span></p><ul class="list _bullet" id="po1oey_1566"><li class="list__item" id="po1oey_1567"><p><span id="po1oey_1568">SQL概述</span></p></li><li class="list__item" id="po1oey_1569"><p><span id="po1oey_1570">连接数据库</span></p></li><li class="list__item" id="po1oey_1571"><p><span id="po1oey_1572">概念</span></p></li><li class="list__item" id="po1oey_1573"><p><span id="po1oey_1574">常用命令</span></p><ul class="list _bullet" id="po1oey_1575"><li class="list__item" id="po1oey_1576"><p><span id="po1oey_1577">Base</span></p><ul class="list _bullet" id="po1oey_1578"><li class="list__item" id="po1oey_1579"><p><span id="po1oey_1580">简单查询</span></p></li><li class="list__item" id="po1oey_1581"><p><span id="po1oey_1582">分组查询</span></p></li><li class="list__item" id="po1oey_1583"><p><span id="po1oey_1584">总结</span></p></li><li class="list__item" id="po1oey_1585"><p><span id="po1oey_1586">连接查询</span></p></li><li class="list__item" id="po1oey_1587"><p><span id="po1oey_1588">子查询</span></p></li><li class="list__item" id="po1oey_1589"><p><span id="po1oey_1590">union</span></p></li></ul></li></ul></li></ul></li></ul><section class="chapter"><h2 id="mysql" data-toc="mysql">MySQL</h2></section><section class="chapter"><h2 id="po1oey_1591" data-toc="po1oey_1591">介绍</h2><section class="chapter"><h3 id="po1oey_1592" data-toc="po1oey_1592">数据是什么</h3></section><section class="chapter"><h3 id="po1oey_1593" data-toc="po1oey_1593">如何存储</h3></section><section class="chapter"><h3 id="po1oey_1594" data-toc="po1oey_1594">数据库引擎</h3><ul class="list _bullet" id="po1oey_1595"><li class="list__item" id="po1oey_1596"><p id="po1oey_1597">innodb</p></li><li class="list__item" id="po1oey_1598"><p id="po1oey_1599">myisam</p></li><li class="list__item" id="po1oey_1600"><p id="po1oey_1601">memory</p></li><li class="list__item" id="po1oey_1602"><p id="po1oey_1603">区别</p><ol class="list _decimal" id="po1oey_1604" type="1"><li class="list__item" id="po1oey_1605"><p>innodb存储引擎数据跟索引文件放在一个文件中,myisam分为不同文件</p></li><li class="list__item" id="po1oey_1606"><p>innodb支持事务,myisam不支持事务</p></li><li class="list__item" id="po1oey_1607"><p>innodb支持表锁和行锁,myisam支持表锁</p></li><li class="list__item" id="po1oey_1608"><p>innodb有外键,myisam没有外键</p></li></ol></li></ul></section><section class="chapter"><h3 id="po1oey_1609" data-toc="po1oey_1609">索引的分类</h3><ul class="list _bullet" id="po1oey_1610"><li class="list__item" id="po1oey_1611"><p>主键索引 </p><ul class="list _bullet" id="po1oey_1612"><li class="list__item" id="po1oey_1613"><p>主键索引是一种唯一性索引,但它必须指定为primary key,每个表只能有一个主见</p></li></ul></li><li class="list__item" id="po1oey_1614"><p>唯一索引 </p><ul class="list _bullet" id="po1oey_1615"><li class="list__item" id="po1oey_1616"><p>索引的列所有值都只能出现一次,即必须唯一,值可以为空</p></li></ul></li><li class="list__item" id="po1oey_1617"><p>普通索引 </p><ul class="list _bullet" id="po1oey_1618"><li class="list__item" id="po1oey_1619"><p>基本的索引类型,值可以为空,没有唯一性限制</p></li></ul></li><li class="list__item" id="po1oey_1620"><p>全文索引 </p><ul class="list _bullet" id="po1oey_1621"><li class="list__item" id="po1oey_1622"><p>全文索引类型为FULLTEXT,全文索引可以在varchar,char,text类型的列上创建</p></li></ul></li><li class="list__item" id="po1oey_1623"><p>组合索引 </p><ul class="list _bullet" id="po1oey_1624"><li class="list__item" id="po1oey_1625"><p>多列值组成一个索引,专门用于组合搜索</p></li></ul></li></ul><section class="chapter"><h4 id="po1oey_1626" data-toc="po1oey_1626">回表</h4></section><section class="chapter"><h4 id="po1oey_1627" data-toc="po1oey_1627">最左匹配原则</h4></section><section class="chapter"><h4 id="po1oey_1628" data-toc="po1oey_1628">索引覆盖</h4></section><section class="chapter"><h4 id="po1oey_1629" data-toc="po1oey_1629">索引下推</h4><p id="po1oey_1630"><code class="code" id="po1oey_1631">select * from t1 where age=? and gender=?</code> 先根据age字段从存储引擎层将数据拉取回server层,然后在server层进行gender筛选,再从存储引擎层拉去数据的 时候,就会直接根据age,gender一起筛选 ##准备</p></section></section><section class="chapter"><h3 id="po1oey_1632" data-toc="po1oey_1632">数据库</h3><ul class="list _bullet" id="po1oey_1633"><li class="list__item" id="po1oey_1634"><p id="po1oey_1635">云数据库</p><ul class="list _bullet" id="po1oey_1636"><li class="list__item" id="po1oey_1637"><p>RDS,PolarDB,TDSQL</p></li></ul></li><li class="list__item" id="po1oey_1638"><p id="po1oey_1639">NewSQL</p><ul class="list _bullet" id="po1oey_1640"><li class="list__item" id="po1oey_1641"><p>TiDB</p></li></ul></li><li class="list__item" id="po1oey_1642"><p id="po1oey_1643">生产线</p><ul class="list _bullet" id="po1oey_1644"><li class="list__item" id="po1oey_1645"><p>厂家 </p><ul class="list _bullet" id="po1oey_1646"><li class="list__item" id="po1oey_1647"><p>Oracle 官方</p></li><li class="list__item" id="po1oey_1648"><p>MariaDB</p></li><li class="list__item" id="po1oey_1649"><p>Percona</p></li></ul></li></ul></li><li class="list__item" id="po1oey_1650"><p id="po1oey_1651">5.6</p><ul class="list _bullet" id="po1oey_1652"><li class="list__item" id="po1oey_1653"><p>5.6.36,5.6.38,5.6.40,5.6.46</p></li></ul></li><li class="list__item" id="po1oey_1654"><p id="po1oey_1655">5.7</p><ul class="list _bullet" id="po1oey_1656"><li class="list__item" id="po1oey_1657"><p>5.7.20 22 24....</p></li></ul></li><li class="list__item" id="po1oey_1658"><p id="po1oey_1659">8.0</p><ul class="list _bullet" id="po1oey_1660"><li class="list__item" id="po1oey_1661"><p>8.0.11,8.0.17,8.0.18</p></li></ul></li><li class="list__item" id="po1oey_1662"><p id="po1oey_1663">C:社区版</p></li><li class="list__item" id="po1oey_1664"><p id="po1oey_1665">E:企业版</p></li></ul></section><section class="chapter"><h3 id="linux-mysql" data-toc="linux-mysql">linux环境 mysql指令</h3><ul class="list _bullet" id="po1oey_1666"><li class="list__item" id="po1oey_1667"><p>数据初始化 </p><ul class="list _bullet" id="po1oey_1668"><li class="list__item" id="po1oey_1669"><p><code class="code" id="po1oey_1670">mysqld --initialize-insecure --user=xxx --basedir=/app/database/mysql --datadir=/data/3306/</code></p></li><li class="list__item" id="po1oey_1671"><p>有-insecure </p><ol class="list _decimal" id="po1oey_1672" type="1"><li class="list__item" id="po1oey_1673"><p>初始化完成后,有12位临时密码,必须在使用mysql之前重置这个密码</p></li><li class="list__item" id="po1oey_1674"><p>密码管理使用严格模式: 3种密码复杂度,8位以上</p></li><li class="list__item" id="po1oey_1675"></li></ol></li></ul></li></ul></section><section class="chapter"><h3 id="sql" data-toc="sql">SQL概述</h3><ul class="list _bullet" id="po1oey_1676"><li class="list__item" id="po1oey_1677"><p>Structured Query Language </p><ul class="list _bullet" id="po1oey_1678"><li class="list__item" id="po1oey_1679"><p>用来跟数据库打交道,完成和数据库的通信,90%以上的SQL语句是通用的</p></li></ul></li><li class="list__item" id="po1oey_1680"><p>数据库(notes.DB) </p><ul class="list _bullet" id="po1oey_1681"><li class="list__item" id="po1oey_1682"><p>notes.DB: 通常是一个或一组文件,保存了一些符合特定规格的数据</p></li><li class="list__item" id="po1oey_1683"><p>DBMS:DataBase Management System 数据库管理系统 MySql,Oracle,执行SQL,操作数据库</p></li></ul></li></ul></section><section class="chapter"><h3 id="po1oey_1684" data-toc="po1oey_1684">连接数据库</h3><ul class="list _bullet" id="po1oey_1685"><li class="list__item" id="po1oey_1686"><p>mysql -uxxxxx -pxxxxx</p></li></ul><div class="code-block" data-lang="bash">
msyql -uroot -p123456
</div></section><section class="chapter"><h3 id="po1oey_1688" data-toc="po1oey_1688">概念</h3><ul class="list _bullet" id="po1oey_1689"><li class="list__item" id="po1oey_1690"><p>table </p><ul class="list _bullet" id="po1oey_1691"><li class="list__item" id="po1oey_1692"><p>一种结构化的文件,用来存储特定类型的数据</p></li></ul></li><li class="list__item" id="po1oey_1693"><p>SQL的分类 </p><ul class="list _bullet" id="po1oey_1694"><li class="list__item" id="po1oey_1695"><p>数据查询语言(DQL-Data Query Language) </p><ul class="list _bullet" id="po1oey_1696"><li class="list__item" id="po1oey_1697"><p>select</p></li></ul></li><li class="list__item" id="po1oey_1698"><p>数据操纵语言(DML-Data Manipulation Language) </p><ul class="list _bullet" id="po1oey_1699"><li class="list__item" id="po1oey_1700"><p>insert,delete,update</p></li></ul></li><li class="list__item" id="po1oey_1701"><p>数据定义语言(DDL-Data Definition Language) </p><ul class="list _bullet" id="po1oey_1702"><li class="list__item" id="po1oey_1703"><p>create,drop,alter</p></li></ul></li><li class="list__item" id="po1oey_1704"><p>事务控制语言(TCL-Transactional Control Language) </p><ul class="list _bullet" id="po1oey_1705"><li class="list__item" id="po1oey_1706"><p>commit,rollback</p></li></ul></li><li class="list__item" id="po1oey_1707"><p>数据控制语言(DCL-Data Control Language) </p><ul class="list _bullet" id="po1oey_1708"><li class="list__item" id="po1oey_1709"><p>grant,revoke</p></li></ul></li></ul></li></ul></section></section><section class="chapter"><h2 id="po1oey_1710" data-toc="po1oey_1710">常用命令</h2><ul class="list _bullet" id="po1oey_1711"><li class="list__item" id="po1oey_1712"><p><code class="code" id="po1oey_1713">select version();</code>查看版本</p></li><li class="list__item" id="po1oey_1714"><p><code class="code" id="po1oey_1715">select database();</code>查看当前数据库</p></li><li class="list__item" id="po1oey_1716"><p><code class="code" id="po1oey_1717">desc &lt;database&gt;;</code> 查看详细信息</p></li><li class="list__item" id="po1oey_1718"><p><code class="code" id="po1oey_1719">show create table &lt;tablename&gt;;</code>查看建表语句</p></li></ul><section class="chapter"><h3 id="base" data-toc="base">Base</h3><section class="chapter"><h4 id="po1oey_1720" data-toc="po1oey_1720">简单查询</h4><ul class="list _bullet" id="po1oey_1721"><li class="list__item" id="po1oey_1722"><p id="po1oey_1723">查询</p><ul class="list _bullet" id="po1oey_1724"><li class="list__item" id="po1oey_1725"><p><code class="code" id="po1oey_1726">select &lt;volumes&gt; from &lt;table&gt;;</code> 查询某个字段的信息(无视大小写) </p><ul class="list _bullet" id="po1oey_1727"><li class="list__item" id="po1oey_1728"><p>可以加数学表达式 </p><ul class="list _bullet" id="po1oey_1729"><li class="list__item" id="po1oey_1730"><p><code class="code" id="po1oey_1731">select empno,ename,sal*12 from emp;</code></p></li></ul></li><li class="list__item" id="po1oey_1732"><p>重命名 </p><ul class="list _bullet" id="po1oey_1733"><li class="list__item" id="po1oey_1734"><p><code class="code" id="po1oey_1735">select empno,ename,sal*12 as years from emp;</code> 加as,可空格不写as select empno,ename,sal*12 as years from emp;</p></li></ul></li></ul></li></ul></li><li class="list__item" id="po1oey_1736"><p id="po1oey_1737">条件查询</p><ul class="list _bullet" id="po1oey_1738"><li class="list__item" id="po1oey_1739"><p><code class="code" id="po1oey_1740">select &lt;volumes&gt; from &lt;table&gt; where &lt;条件&gt;;</code></p></li><li class="list__item" id="po1oey_1741"><p>条件 </p><ul class="list _bullet" id="po1oey_1742"><li class="list__item" id="po1oey_1743"><div class="table-wrapper"><table class="wide" id="po1oey_1744"><thead><tr class="ijRowHead" id="po1oey_1745"><th id="po1oey_1746"><p>运算符</p></th><th id="po1oey_1747"><p>说明</p></th></tr></thead><tbody><tr id="po1oey_1748"><td id="po1oey_1749"><p>=</p></td><td id="po1oey_1750"><p>等于</p></td></tr><tr id="po1oey_1751"><td id="po1oey_1752"><p>&lt;&gt;或!=</p></td><td id="po1oey_1753"><p>不等于</p></td></tr><tr id="po1oey_1754"><td id="po1oey_1755"><p>&lt;</p></td><td id="po1oey_1756"><p>小于</p></td></tr><tr id="po1oey_1757"><td id="po1oey_1758"><p>&gt;</p></td><td id="po1oey_1759"><p>大于</p></td></tr><tr id="po1oey_1760"><td id="po1oey_1761"><p>&gt;=</p></td><td id="po1oey_1762"><p>大于等于</p></td></tr><tr id="po1oey_1763"><td id="po1oey_1764"><p>between ...and...</p></td><td id="po1oey_1765"><p>两只之间,等同于&gt;= and &lt;=,左闭右开</p></td></tr><tr id="po1oey_1766"><td id="po1oey_1767"><p>is null</p></td><td id="po1oey_1768"><p>为null(is not null 不为空)</p></td></tr><tr id="po1oey_1769"><td id="po1oey_1770"><p>and</p></td><td id="po1oey_1771"><p>并且 ,优先级高于'or'</p></td></tr><tr id="po1oey_1772"><td id="po1oey_1773"><p>or</p></td><td id="po1oey_1774"><p>或者</p></td></tr><tr id="po1oey_1775"><td id="po1oey_1776"><p>in</p></td><td id="po1oey_1777"><p>包含</p></td></tr><tr id="po1oey_1778"><td id="po1oey_1779"><p>not</p></td><td id="po1oey_1780"><p>取非,主要用在is 或 in中</p></td></tr><tr id="po1oey_1781"><td id="po1oey_1782"><p>like</p></td><td id="po1oey_1783"><p>模糊查询,支持%或下划线匹配,%匹配任意个字符,下划线,一个下划线匹配一个字符</p></td></tr></tbody></table></div></li></ul></li></ul></li><li class="list__item" id="po1oey_1784"><p id="po1oey_1785">排序</p><ul class="list _bullet" id="po1oey_1786"><li class="list__item" id="po1oey_1787"><p><code class="code" id="po1oey_1788">order by &lt;volume&gt;</code> 默认升序,volume可为数字,代表第几个属性 </p><ul class="list _bullet" id="po1oey_1789"><li class="list__item" id="po1oey_1790"><p><code class="code" id="po1oey_1791">asc</code> 升序</p></li><li class="list__item" id="po1oey_1792"><p><code class="code" id="po1oey_1793">desc</code> 降序</p></li></ul></li></ul></li><li class="list__item" id="po1oey_1794"><p id="po1oey_1795">数据处理函数/单行处理函数</p><ul class="list _bullet" id="po1oey_1796"><li class="list__item" id="po1oey_1797"><div class="table-wrapper"><table class="wide" id="po1oey_1798"><thead><tr class="ijRowHead" id="po1oey_1799"><th id="po1oey_1800"><p>运算符</p></th><th id="po1oey_1801"><p>说明</p></th><th id="po1oey_1802"><p>示例</p></th></tr></thead><tbody><tr id="po1oey_1803"><td id="po1oey_1804"><p>Lower</p></td><td id="po1oey_1805"><p>转换小写</p></td><td id="po1oey_1806"><p>lower(ename)</p></td></tr><tr id="po1oey_1807"><td id="po1oey_1808"><p>upper</p></td><td id="po1oey_1809"><p>转换大写</p></td><td id="po1oey_1810"><p>upper(ename)</p></td></tr><tr id="po1oey_1811"><td id="po1oey_1812"><p>substr</p></td><td id="po1oey_1813"><p>子串</p></td><td id="po1oey_1814"><p>substr(ename,1,2)</p></td></tr><tr id="po1oey_1815"><td id="po1oey_1816"><p>length</p></td><td id="po1oey_1817"><p>取长度</p></td><td id="po1oey_1818"><p>length(ename)</p></td></tr><tr id="po1oey_1819"><td id="po1oey_1820"><p>trim</p></td><td id="po1oey_1821"><p>去空格</p></td><td id="po1oey_1822"><p>trim(ename)</p></td></tr><tr id="po1oey_1823"><td id="po1oey_1824"><p>str_to_date</p></td><td id="po1oey_1825"><p>将字符串换成日期</p></td><td id="po1oey_1826"><p>str_to_date('字符串','时间格式')</p></td></tr><tr id="po1oey_1827"><td id="po1oey_1828"><p>date_format</p></td><td id="po1oey_1829"><p>格式化日期</p></td><td id="po1oey_1830"><p>date_format(日期类型数据,'日期格式')</p></td></tr><tr id="po1oey_1831"><td id="po1oey_1832"><p>format</p></td><td id="po1oey_1833"><p>设置千分位</p></td></tr><tr id="po1oey_1834"><td id="po1oey_1835"><p>round</p></td><td id="po1oey_1836"><p>四舍五入</p></td><td id="po1oey_1837"><p>round(comm,0)第二个参数为取得为数,可为负数</p></td></tr><tr id="po1oey_1838"><td id="po1oey_1839"><p>rand()</p></td><td id="po1oey_1840"><p>生成随机数</p></td><td id="po1oey_1841"><p>与java Math.Random()类似</p></td></tr><tr id="po1oey_1842"><td id="po1oey_1843"><p>ifnull</p></td><td id="po1oey_1844"><p>将null转换为具体值</p></td><td id="po1oey_1845"><p>ifnull(comm,0)如果comm为null,则转换为0</p></td></tr></tbody></table></div></li></ul></li><li class="list__item" id="po1oey_1846"><p id="po1oey_1847">日期</p><ul class="list _bullet" id="po1oey_1848"><li class="list__item" id="po1oey_1849"><p>关于MySQL中的日期处理 </p><ul class="list _bullet" id="po1oey_1850"><li class="list__item" id="po1oey_1851"><p>每一个数据库处理日期的时候,采用的机制都是不同的,日期处理都有自己的一套机制,所以在实际开发中 表中的字段定义为DATE类型,这种情况很少,因为一旦使用日期类型,那么java程序将不能够通用,在实际开发中 一般使用&quot;日期字符串&quot;来表示日期</p></li></ul></li></ul></li><li class="list__item" id="po1oey_1852"><p id="po1oey_1853">MySQL数据库管理系统中对日期的处理提供了两个重要函数</p><ul class="list _bullet" id="po1oey_1854"><li class="list__item" id="po1oey_1855"><p>str_to_date</p></li><li class="list__item" id="po1oey_1856"><p>date_format</p></li></ul></li><li class="list__item" id="po1oey_1857"><p id="po1oey_1858">str_to_date</p><ul class="list _bullet" id="po1oey_1859"><li class="list__item" id="po1oey_1860"><p>该函数的作用是:将日期字符串转换成日期类型 varchar--&gt;date</p></li><li class="list__item" id="po1oey_1861"><p>该函数的执行结果是DATE类型</p></li><li class="list__item" id="po1oey_1862"><p>该函数的使用格式 </p><ul class="list _bullet" id="po1oey_1863"><li class="list__item" id="po1oey_1864"><p>str_to_date('日期字符串','日期格式')</p></li></ul></li></ul></li></ul><div class="code-block" data-lang="sql">
select ename,hiredate from emp where hiredate=str_to_date('12-17-1980','%m-%d-%Y');
</div><ul class="list _bullet" id="po1oey_1866"><li class="list__item" id="po1oey_1867"><p>date_format </p><ul class="list _bullet" id="po1oey_1868"><li class="list__item" id="po1oey_1869"><p>该函数的作用是:将日期类型date转换成剧有特定格式的日期字符串varchar date--&gt;varchar</p></li><li class="list__item" id="po1oey_1870"><p>该函数的运算结果是:varchar类型(具备特定格式)</p></li><li class="list__item" id="po1oey_1871"><p>该函数的语法格式: </p><ul class="list _bullet" id="po1oey_1872"><li class="list__item" id="po1oey_1873"><p>date_format(日期类型数据,'日期格式')</p></li></ul></li></ul></li></ul><div class="code-block" data-lang="sql">
 select ename,date_format(hiredate,'%m-%d-%Y') as hiredate from emp;
</div><ul class="list _bullet" id="po1oey_1875"><li class="list__item" id="po1oey_1876"><p id="po1oey_1877">日期格式</p><ul class="list _bullet" id="po1oey_1878"><li class="list__item" id="po1oey_1879"><div class="table-wrapper"><table class="wide" id="po1oey_1880"><thead><tr class="ijRowHead" id="po1oey_1881"><th id="po1oey_1882"><p>notes.Java</p></th><th id="po1oey_1883"><p>MySQL</p></th><th id="po1oey_1884"><p>说明</p></th></tr></thead><tbody><tr id="po1oey_1885"><td id="po1oey_1886"><p>yyyy</p></td><td id="po1oey_1887"><p>%Y</p></td><td id="po1oey_1888"><p>年</p></td></tr><tr id="po1oey_1889"><td id="po1oey_1890"><p>MM</p></td><td id="po1oey_1891"><p>%m</p></td><td id="po1oey_1892"><p>月</p></td></tr><tr id="po1oey_1893"><td id="po1oey_1894"><p>dd</p></td><td id="po1oey_1895"><p>%d</p></td><td id="po1oey_1896"><p>日</p></td></tr><tr id="po1oey_1897"><td id="po1oey_1898"><p>HH</p></td><td id="po1oey_1899"><p>%H</p></td><td id="po1oey_1900"><p>时</p></td></tr><tr id="po1oey_1901"><td id="po1oey_1902"><p>mm</p></td><td id="po1oey_1903"><p>%i</p></td><td id="po1oey_1904"><p>分</p></td></tr><tr id="po1oey_1905"><td id="po1oey_1906"><p>ss</p></td><td id="po1oey_1907"><p>%s</p></td><td id="po1oey_1908"><p>秒</p></td></tr><tr id="po1oey_1909"><td id="po1oey_1910"><p>SSS</p></td><td id="po1oey_1911"></td><td id="po1oey_1912"><p>毫秒</p></td></tr></tbody></table></div></li></ul></li><li class="list__item" id="po1oey_1913"><p id="po1oey_1914">分组函数/聚合函数/多行处理函数 (忽略空值)</p><ul class="list _bullet" id="po1oey_1915"><li class="list__item" id="po1oey_1916"><div class="table-wrapper"><table class="wide" id="po1oey_1917"><thead><tr class="ijRowHead" id="po1oey_1918"><th id="po1oey_1919"><p>函数</p></th><th id="po1oey_1920"><p>说明</p></th></tr></thead><tbody><tr id="po1oey_1921"><td id="po1oey_1922"><p>count</p></td><td id="po1oey_1923"><p>取得记录值</p></td></tr><tr id="po1oey_1924"><td id="po1oey_1925"><p>sum</p></td><td id="po1oey_1926"><p>求和</p></td></tr><tr id="po1oey_1927"><td id="po1oey_1928"><p>avg</p></td><td id="po1oey_1929"><p>取平均</p></td></tr><tr id="po1oey_1930"><td id="po1oey_1931"><p>max</p></td><td id="po1oey_1932"><p>取最大值</p></td></tr><tr id="po1oey_1933"><td id="po1oey_1934"><p>min</p></td><td id="po1oey_1935"><p>取最小</p></td></tr></tbody></table></div></li><li class="list__item" id="po1oey_1936"><p>分组函数不能直接用在where函数中</p></li></ul></li><li class="list__item" id="po1oey_1937"><p id="po1oey_1938">distinct 去重复</p><ul class="list _bullet" id="po1oey_1939"><li class="list__item" id="po1oey_1940"><p>前面不能有字段</p></li></ul></li></ul><div class="code-block" data-lang="sql">
select distinct job from emp;
</div></section><section class="chapter"><h4 id="po1oey_1942" data-toc="po1oey_1942">分组查询</h4><ul class="list _bullet" id="po1oey_1943"><li class="list__item" id="po1oey_1944"><p>分组查询涉及的两个子句: </p><ul class="list _bullet" id="po1oey_1945"><li class="list__item" id="po1oey_1946"><p>group by 分组,优先执行(先分组,再where,再select再having)</p></li><li class="list__item" id="po1oey_1947"><p>having 分组之后过滤</p></li></ul></li><li class="list__item" id="po1oey_1948"><p>group by </p><ul class="list _bullet" id="po1oey_1949"><li class="list__item" id="po1oey_1950"><p>若一条DQL语句中有group by子句,那么select关键字后面只能跟参与分组的字段和分组函数 求不同job的最大sal</p></li></ul></li></ul><div class="code-block" data-lang="sql">
 select max(sal) from emp group by job;
</div><p id="po1oey_1952">求不同job的最大sal也显示job</p><div class="code-block" data-lang="sql">
select job,max(sal) from emp group by job;
</div><p id="po1oey_1954">两个字段联合划分分组</p><div class="code-block" data-lang="sql">
 select deptno,job,max(sal) from emp group by job,deptno;
</div><p id="po1oey_1956">select: 分组前筛选 having: 分组后筛选</p><div class="code-block" data-lang="sql">
 select job,avg(sal) from emp group by job having avg(sal)&gt;1500;

</div><ul class="list _bullet" id="po1oey_1958"><li class="list__item" id="po1oey_1959"><p>原则: </p><ul class="list _bullet" id="po1oey_1960"><li class="list__item" id="po1oey_1961"><p>尽量在where中过滤,无法过滤的数据,通常需要先分组之后再过滤,这个时候可以选择用having.效率问题</p></li></ul></li></ul></section><section class="chapter"><h4 id="po1oey_1962" data-toc="po1oey_1962">总结</h4><div class="code-block" data-lang="sql">
select
    ...
from
    ...
where
    ...
group by
    ...
having
    ...
order by
    ...

</div><ol class="list _decimal" id="po1oey_1964" type="1"><li class="list__item" id="po1oey_1965"><p>顺序不能变</p></li><li class="list__item" id="po1oey_1966"><p>执行顺序 </p><ol class="list _decimal" id="po1oey_1967" type="1"><li class="list__item" id="po1oey_1968"><p>from 从某张表中查询出来</p></li><li class="list__item" id="po1oey_1969"><p>where 经过某条件进行过滤</p></li><li class="list__item" id="po1oey_1970"><p>group by 然后分组</p></li><li class="list__item" id="po1oey_1971"><p>having 分组之后不满意再过滤</p></li><li class="list__item" id="po1oey_1972"><p>select 查询出来</p></li><li class="list__item" id="po1oey_1973"><p>order by 排序输出</p></li></ol></li></ol></section><section class="chapter"><h4 id="po1oey_1974" data-toc="po1oey_1974">连接查询</h4><ol class="list _decimal" id="po1oey_1975" type="1"><li class="list__item" id="po1oey_1976"><p id="po1oey_1977">什么是连接查询</p><ul class="list _bullet" id="po1oey_1978"><li class="list__item" id="po1oey_1979"><p>查询的时候只从一张表检索数据,称为单表查询</p></li><li class="list__item" id="po1oey_1980"><p>在实际开发中,数据并不是存储在一张表中,是同时存储在多张表中,这些表和表之箭存在关系,我们在检索的时候通常是 需要将多张表联合起来取得有效数据,这种多表查询被称为连接查询或者叫做跨表查询</p></li></ul></li><li class="list__item" id="po1oey_1981"><p id="po1oey_1982">链接查询根据出现年代分类</p><ul class="list _bullet" id="po1oey_1983"><li class="list__item" id="po1oey_1984"><p>SQL92[1992]</p></li><li class="list__item" id="po1oey_1985"><p>SQL00[1999:更新的语法,主要掌握这种]</p></li></ul></li><li class="list__item" id="po1oey_1986"><p id="po1oey_1987">连接查询根据连接方式可分为</p><ul class="list _bullet" id="po1oey_1988"><li class="list__item" id="po1oey_1989"><p>内连接 :A表和B表能够完全匹配的记录查询出来,被称为内连接(inner可以省略) </p><ul class="list _bullet" id="po1oey_1990"><li class="list__item" id="po1oey_1991"><p id="po1oey_1992">等值连接</p><ul class="list _bullet" id="po1oey_1993"><li class="list__item" id="po1oey_1994"><p>SQL92语法:等值连接</p></li></ul><div class="code-block" data-lang="sql">
  select e.ename ,d.dname from emp e ,dept d where e.deptno=d.deptno;
</div><p id="po1oey_1996">-SQL99语法:等值连接 join on - 表独立出来了,结构更清晰,对表连接不满意的话可以追加where过滤</p><div class="code-block" data-lang="sql">
 select e.ename ,d.dname from emp e join dept d on e.deptno=d.deptno;
</div></li><li class="list__item" id="po1oey_1998"><p id="po1oey_1999">非等值连接</p><ul class="list _bullet" id="po1oey_2000"><li class="list__item" id="po1oey_2001"><p id="po1oey_2002">SQL99:</p><div class="code-block" data-lang="sql">
select e.ename,s.grade from emp e , salgrade s where e.sal between s.losal and hisal;
</div></li><li class="list__item" id="po1oey_2004"><p id="po1oey_2005">SQL99:</p><div class="code-block" data-lang="sql">
select e.ename,s.grade from emp e join salgrade s on e.sal between s.losal and hisal;
</div></li></ul></li><li class="list__item" id="po1oey_2007"><p id="po1oey_2008">自连接</p><ul class="list _bullet" id="po1oey_2009"><li class="list__item" id="po1oey_2010"><p id="po1oey_2011">SQL99:</p><div class="code-block" data-lang="sql">
select e.ename , m.ename from emp e , emp m where m.empno=e.mgr;
</div></li><li class="list__item" id="po1oey_2013"><p id="po1oey_2014">SQL99:</p><div class="code-block" data-lang="sql">
select e.ename , m.ename from emp e join emp m on m.empno=e.mgr;
</div></li></ul></li></ul></li><li class="list__item" id="po1oey_2016"><p>外连接 : (outer可以省略) </p><ul class="list _bullet" id="po1oey_2017"><li class="list__item" id="po1oey_2018"><p id="po1oey_2019">A表和B表能够完全匹配的记录查询出来之外,将其中一张表的记录无条件的完全查询出来. 对方没有匹配的记录,会自动模拟出null与之匹配,这种查询被称为外连接</p></li><li class="list__item" id="po1oey_2020"><p id="po1oey_2021">外连接的查询结果条数&gt;=内连接的查询结果条数</p></li><li class="list__item" id="po1oey_2022"><p id="po1oey_2023">左外连接</p><ul class="list _bullet" id="po1oey_2024"><li class="list__item" id="po1oey_2025"><p id="po1oey_2026">SQL99:</p><div class="code-block" data-lang="sql">
select e.ename,d.dname from dept d left join emp e on e.deptno=d.deptno;
</div></li></ul></li><li class="list__item" id="po1oey_2028"><p id="po1oey_2029">右外连接</p><ul class="list _bullet" id="po1oey_2030"><li class="list__item" id="po1oey_2031"><p id="po1oey_2032">SQL99:</p><div class="code-block" data-lang="sql">
 select e.ename,d.dname from emp e right join dept d on e.deptno=d.deptno;
</div></li></ul></li><li class="list__item" id="po1oey_2034"><p id="po1oey_2035">任何一个右外连接都可以写成左外连接,反之亦可</p></li></ul></li><li class="list__item" id="po1oey_2036"><p>全连接</p></li></ul></li></ol><ul class="list _bullet" id="po1oey_2037"><li class="list__item" id="po1oey_2038"><p>若两张表进行连接查询的时候没有任何条件限制,最终的查询结果总数是两张表记录的条数的乘积,这种现象被称为 笛卡尔积现象,为了避免笛卡尔积现象的发生,必须在进行表连接的时候添加限制条件</p></li></ul><div class="code-block" data-lang="sql">
 select e.ename ,d.dname from emp e ,dept d;
</div><ul class="list _bullet" id="po1oey_2040"><li class="list__item" id="po1oey_2041"><p>多张表连接的语法格式</p></li></ul><div class="code-block" data-lang="sql">
select
    xxx
from
    a
join
    b
on
    条件
join
    c
on
    条件;

</div><p id="po1oey_2043">原理:a和b进行表连接之后,a再和c进行表连接</p><ul class="list _bullet" id="po1oey_2044"><li class="list__item" id="po1oey_2045"><p>案例:找出每一个员工对应的部门名称,以及该员工的工资等级:</p></li></ul><div class="code-block" data-lang="sql">
 select e.ename ,d.dname,s.grade from emp e join dept d on e.deptno=d.deptno join salgrade s on e.sal between losal and hisal;
</div><p id="po1oey_2047">子查询:</p><div class="code-block" data-lang="sql">
select e.ename,e.dname,s.grade from (select e.ename,e.sal,d.dname from emp e left join dept d on e.deptno=d.deptno) e left join salgrade s on e.sal between s.losal and hisal;
</div></section><section class="chapter"><h4 id="po1oey_2049" data-toc="po1oey_2049">子查询</h4><ol class="list _decimal" id="po1oey_2050" type="1"><li class="list__item" id="po1oey_2051"><p>什么是子查询 </p><ul class="list _bullet" id="po1oey_2052"><li class="list__item" id="po1oey_2053"><p>select语句嵌套select语句</p></li></ul></li><li class="list__item" id="po1oey_2054"><p>子查询可以出现在哪儿 </p><ul class="list _bullet" id="po1oey_2055"><li class="list__item" id="po1oey_2056"><p>select...(select)</p></li><li class="list__item" id="po1oey_2057"><p>from....(select)</p></li><li class="list__item" id="po1oey_2058"><p>where....(select)</p></li></ul></li></ol><p id="po1oey_2059">select后select</p><div class="code-block" data-lang="sql">
select e.ename,(select d.dname from dept d where e.deptno=d.deptno)as dname from emp e;
</div><ul class="list _bullet" id="po1oey_2061"><li class="list__item" id="po1oey_2062"><p>找出每个部门的平均薪水,并且要求显示平均薪水的薪水等级 from 后select</p></li></ul><div class="code-block" data-lang="sql">
select d.dname,s.grade from( select d.dname ,e.sal from (select deptno,avg(sal) as sal from emp group by deptno) e join dept d on d.deptno=e.deptno) d join salgrade s on d.sal between losal and hisal;
</div></section><section class="chapter"><h4 id="union" data-toc="union">union</h4><ul class="list _bullet" id="po1oey_2064"><li class="list__item" id="po1oey_2065"><p>连接两个表一同输出</p></li></ul><div class="code-block" data-lang="sql">
select xxxxx
union
select xxxxx
</div><p id="po1oey_2067">字段个数相同,(Oracle中数据类型也要相同)</p></section><section class="chapter"><h4 id="limit" data-toc="limit">limit</h4><ol class="list _decimal" id="po1oey_2068" type="1"><li class="list__item" id="po1oey_2069"><p>获取一张表中的某部分数据</p></li><li class="list__item" id="po1oey_2070"><p>只在MySQL数据库中存在,不通用,是MySQL数据库的特色</p></li></ol><div class="code-block" data-lang="sql">
 select ename ,sal from emp limit 5;
</div><p id="po1oey_2072">limit 5 代表,从表中记录下标0开始,取五条等同于下面的sql语句</p><div class="code-block" data-lang="sql">
 select ename ,sal from emp limit 0,5;
</div><p id="po1oey_2074">limit的语法: limit 起始下标,长度 - 起始坐标没有指定,默认从0开始,0表示表中的第一条ji'lu</p><ul class="list _bullet" id="po1oey_2075"><li class="list__item" id="po1oey_2076"><p>找出公司中工资排名在前五的员工</p></li></ul><div class="code-block" data-lang="sql">
select ename ,sal from emp order by sal desc limit 5;
</div></section></section><section class="chapter"><h3 id="po1oey_2078" data-toc="po1oey_2078">表</h3><ul class="list _bullet" id="po1oey_2079"><li class="list__item" id="po1oey_2080"><p>DDL</p></li></ul></section></section><div class="last-modified">Last modified: 30 四月 2024</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom"><a href="elasticsearch.html" class="navigation-links__prev">Elasticsearch</a></div></article><div id="disqus_thread"></div></div></section></main></div><script src="https://resources.jetbrains.com/writerside/apidoc/6.10.0-b259/app.js"></script></body></html>