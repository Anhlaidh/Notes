# 面试
## JVM
jvisualvm
### 栈
#### 栈帧
1. 局部变量表
2. 操作数栈
3. 动态链接
4. 方法出口
### 程序计数器
### javap
`javap -c xxx.class`反编译 `> xxx.txt`
### 堆
1. 年轻代(1/3)
    - Eden(8/10)(minor gc区)
    - Survivor区(2/10)
        - s0(1/10)
        - s1(1/10)
2. 老年代(2/3)

#### 垃圾回收
1. Eden堆满 -->minorgc( 查找gcRoot-->可达性分析算法 -->分代年龄+1 -->复制到s0堆,清理Eden)
2. Eden堆满 -->minorgc( 查找gcRoot-->可达性分析算法 -->分代年龄+1 -->复 制到s1堆,清理Eden+s1)
之后s1 s2 反复横跳
3. 分代年龄>=15时,转移到老年代堆
4. 老年代堆满-->full gc -不能回收-> OOM

### 调优
- 目的: 减少STW(stop the world)
- gc的时候会停止所有线程 为什么?

## MySQL
- 慢SQL -优化-> 加索引
- 索引:
采用B+树数据结构,两次IO,内存取数
16kb一层 1170*1170*16,单个节点8kb,6kb

- 聚集索引:叶子节点包含数据
- 非聚集索引:MYI查找后从MYD中找数据(通过磁盘地址)
- innodb 必有主键索引,如果没设置,会构建隐藏列维护表结构

联合索引
排序 数据结构 B+Tree

## Redis
## JMM
JSR-133
### 并行消息
- 线程:程序进行的载体
- JMM 八大原子操作
    - lock
    - unlock
    - read
    - load
    - use
    - assign
    - store
    - write

- volatile 可见性原理
    - 底层实现: 通过汇编lock前缀指令触发底层缓存锁定机制(缓存一致性协议&总线锁)
- 缓存一致性协议:
    - msi mesi
    
### 分布式锁
- synchronized
    - 基于c++,语言实现的同步机制
- AQS 同步器
