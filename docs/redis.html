<!DOCTYPE html SYSTEM "about:legacy-compat">
<html lang="en-US" data-preset="contrast" data-primary-color="#307FFF"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8"><meta name="built-on" content="2024-04-30T19:18:20.817746"><title>Redis | Notes</title><script type="application/json" id="virtual-toc-data">[{"id":"i2nnefm_585","level":0,"title":"安装\u0026启动","anchor":"#i2nnefm_585"},{"id":"i2nnefm_591","level":0,"title":"入门","anchor":"#i2nnefm_591"},{"id":"i2nnefm_700","level":0,"title":"进阶","anchor":"#i2nnefm_700"}]</script><script type="application/json" id="topic-shortcuts"></script><link href="https://resources.jetbrains.com/writerside/apidoc/6.10.0-b259/app.css" rel="stylesheet"><meta name="msapplication-TileColor" content="#000000"><link rel="apple-touch-icon" sizes="180x180" href="https://jetbrains.com/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="https://jetbrains.com/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="https://jetbrains.com/favicon-16x16.png"><meta name="msapplication-TileImage" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-144x144.png"><meta name="msapplication-square70x70logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-70x70.png"><meta name="msapplication-square150x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-150x150.png"><meta name="msapplication-wide310x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x150.png"><meta name="msapplication-square310x310logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x310.png"><meta name="image" content=""><!-- Open Graph --><meta property="og:title" content="Redis | Notes"><meta property="og:description" content=""><meta property="og:image" content=""><meta property="og:site_name" content="Notes Help"><meta property="og:type" content="website"><meta property="og:locale" content="en_US"><meta property="og:url" content="writerside-documentation/notes/0.1/redis.html"><!-- End Open Graph --><!-- Twitter Card --><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content=""><meta name="twitter:title" content="Redis | Notes"><meta name="twitter:description" content=""><meta name="twitter:creator" content=""><meta name="twitter:image:src" content=""><!-- End Twitter Card --><!-- Schema.org WebPage --><script type="application/ld+json">{
    "@context": "http://schema.org",
    "@type": "WebPage",
    "@id": "writerside-documentation/notes/0.1/redis.html#webpage",
    "url": "writerside-documentation/notes/0.1/redis.html",
    "name": "Redis | Notes",
    "description": "",
    "image": "",
    "inLanguage":"en-US"
}</script><!-- End Schema.org --><!-- Schema.org WebSite --><script type="application/ld+json">{
    "@type": "WebSite",
    "@id": "writerside-documentationnotes/#website",
    "url": "writerside-documentationnotes/",
    "name": "Notes Help"
}</script><!-- End Schema.org --></head><body data-id="Redis" data-main-title="Redis" data-article-props="{&quot;seeAlsoStyle&quot;:&quot;links&quot;}" data-template="article" data-breadcrumbs="README.md|Notes///java///notes///DB"><div class="wrapper"><main class="panel _main"><header class="panel__header"><div class="container"><h3>Notes 0.1 Help</h3><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="Redis" id="Redis.md">Redis</h1><p id="i2nnefm_584">@[TOC]</p><section class="chapter"><h2 id="i2nnefm_585" data-toc="i2nnefm_585">安装&amp;启动</h2><section class="chapter"><h3 id="server" data-toc="server">server</h3><ul class="list _bullet" id="i2nnefm_586"><li class="list__item" id="i2nnefm_587"><p>redis_6379</p></li><li class="list__item" id="i2nnefm_588"><p>redis-server /etc/redis/6379.conf</p></li><li class="list__item" id="i2nnefm_589"><p><code class="code" id="i2nnefm_590">--loadmoudle</code></p></li></ul></section><section class="chapter"><h3 id="client" data-toc="client">client</h3></section></section><section class="chapter"><h2 id="i2nnefm_591" data-toc="i2nnefm_591">入门</h2><ul class="list _bullet" id="i2nnefm_592"><li class="list__item" id="i2nnefm_593"><p>无数据类型</p></li><li class="list__item" id="i2nnefm_594"><p>默认16个库(分为16个独立的区域)</p></li><li class="list__item" id="i2nnefm_595"><p>redis-cli -p xxxx -n [指定库]</p></li><li class="list__item" id="i2nnefm_596"><p>方法与类型绑定 </p><ul class="list _bullet" id="i2nnefm_597"><li class="list__item" id="i2nnefm_598"><p>type 获取值的类型</p></li></ul></li><li class="list__item" id="i2nnefm_599"><p>二进制安全 </p><ul class="list _bullet" id="i2nnefm_600"><li class="list__item" id="i2nnefm_601"><p>字节流</p></li><li class="list__item" id="i2nnefm_602"><p>字符流</p></li></ul></li><li class="list__item" id="i2nnefm_603"><p>redis-cli --raw 格式化</p></li><li class="list__item" id="i2nnefm_604"><p>help</p></li><li class="list__item" id="i2nnefm_605"><p>keys *</p></li><li class="list__item" id="i2nnefm_606"><p>flushall</p></li><li class="list__item" id="i2nnefm_607"><p>flushdb</p></li></ul><section class="chapter"><h3 id="i2nnefm_608" data-toc="i2nnefm_608">数据类型</h3><p id="i2nnefm_609">help @String</p><ul class="list _bullet" id="i2nnefm_610"><li class="list__item" id="i2nnefm_611"><p>String </p><ul class="list _bullet" id="i2nnefm_612"><li class="list__item" id="i2nnefm_613"><p>encoding-str </p><ul class="list _bullet" id="i2nnefm_614"><li class="list__item" id="i2nnefm_615"><p>set </p><ul class="list _bullet" id="i2nnefm_616"><li class="list__item" id="i2nnefm_617"><p>生存时间</p></li><li class="list__item" id="i2nnefm_618"><p>nx - 不存在的时候赋值</p></li><li class="list__item" id="i2nnefm_619"><p>xx - 存在的时候才能更新</p></li></ul></li><li class="list__item" id="i2nnefm_620"><p>get</p></li><li class="list__item" id="i2nnefm_621"><p>mset - 多个存</p></li><li class="list__item" id="i2nnefm_622"><p>mget - 多个取</p></li><li class="list__item" id="i2nnefm_623"><p>append - 追加</p></li><li class="list__item" id="i2nnefm_624"><p>getrange [start] [end] </p><ul class="list _bullet" id="i2nnefm_625"><li class="list__item" id="i2nnefm_626"><p>正反向索引</p></li></ul></li><li class="list__item" id="i2nnefm_627"><p>setrange 修改</p></li><li class="list__item" id="i2nnefm_628"><p>strlen -&gt; length</p></li><li class="list__item" id="i2nnefm_629"><p>msetnx 原子性多操作,一个失败就取消操作</p></li></ul></li><li class="list__item" id="i2nnefm_630"><p>encoding-int(省去之后计算的判断,本质还是字节流) </p><ul class="list _bullet" id="i2nnefm_631"><li class="list__item" id="i2nnefm_632"><p>incr +1</p></li><li class="list__item" id="i2nnefm_633"><p>incrby [value] n</p></li><li class="list__item" id="i2nnefm_634"><p>decr [value] 减1</p></li><li class="list__item" id="i2nnefm_635"><p>incrbyfloat [value] n 加浮点数</p></li></ul></li><li class="list__item" id="i2nnefm_636"><p>bitmap </p><ul class="list _bullet" id="i2nnefm_637"><li class="list__item" id="i2nnefm_638"><p>bitset 设置字节中的bit <code class="code" id="i2nnefm_639">offset是指bit</code></p></li><li class="list__item" id="i2nnefm_640"><p>bitpos 第一个1 <code class="code" id="i2nnefm_641">offset是指字节</code></p></li><li class="list__item" id="i2nnefm_642"><p>bitcount <code class="code" id="i2nnefm_643">offset是指字节</code></p></li><li class="list__item" id="i2nnefm_644"><p>bitop</p></li></ul></li></ul></li><li class="list__item" id="i2nnefm_645"><p>List </p><ul class="list _bullet" id="i2nnefm_646"><li class="list__item" id="i2nnefm_647"><p>Lpush</p></li><li class="list__item" id="i2nnefm_648"><p>Rpush</p></li><li class="list__item" id="i2nnefm_649"><p>Lpop</p></li><li class="list__item" id="i2nnefm_650"><p>Rpop</p></li><li class="list__item" id="i2nnefm_651"><p>lrange</p></li><li class="list__item" id="i2nnefm_652"><p>Lindex</p></li><li class="list__item" id="i2nnefm_653"><p>Rindex</p></li><li class="list__item" id="i2nnefm_654"><p>Lrem</p></li><li class="list__item" id="i2nnefm_655"><p>Rrem</p></li><li class="list__item" id="i2nnefm_656"><p>llen</p></li><li class="list__item" id="i2nnefm_657"><p>blpop </p><ul class="list _bullet" id="i2nnefm_658"><li class="list__item" id="i2nnefm_659"><p>阻塞队列,单播队列</p></li><li class="list__item" id="i2nnefm_660"><p>先进先出</p></li></ul></li><li class="list__item" id="i2nnefm_661"><p>Ltrim</p></li></ul></li><li class="list__item" id="i2nnefm_662"><p>Hash map(k-v) </p><ul class="list _bullet" id="i2nnefm_663"><li class="list__item" id="i2nnefm_664"><p>hset</p></li><li class="list__item" id="i2nnefm_665"><p>hget</p></li><li class="list__item" id="i2nnefm_666"><p>hgetall</p></li><li class="list__item" id="i2nnefm_667"><p>hincrby</p></li><li class="list__item" id="i2nnefm_668"><p>hincrybyfloat</p></li><li class="list__item" id="i2nnefm_669"><p><code class="code" id="i2nnefm_670">keys sean*</code></p></li></ul></li><li class="list__item" id="i2nnefm_671"><p>set </p><ul class="list _bullet" id="i2nnefm_672"><li class="list__item" id="i2nnefm_673"><p>sadd</p></li><li class="list__item" id="i2nnefm_674"><p>scard</p></li><li class="list__item" id="i2nnefm_675"><p>交集并集差集 </p><ul class="list _bullet" id="i2nnefm_676"><li class="list__item" id="i2nnefm_677"><p>sinter(store)</p></li><li class="list__item" id="i2nnefm_678"><p>sunion</p></li><li class="list__item" id="i2nnefm_679"><p>sdiff</p></li></ul></li><li class="list__item" id="i2nnefm_680"><p>sismember</p></li><li class="list__item" id="i2nnefm_681"><p>smembers</p></li><li class="list__item" id="i2nnefm_682"><p>srandmember</p></li><li class="list__item" id="i2nnefm_683"><p>spop</p></li></ul></li><li class="list__item" id="i2nnefm_684"><p>sorted_set </p><ul class="list _bullet" id="i2nnefm_685"><li class="list__item" id="i2nnefm_686"><p>zadd</p></li><li class="list__item" id="i2nnefm_687"><p>zrange #</p></li><li class="list__item" id="i2nnefm_688"><p>zrevrange #</p></li><li class="list__item" id="i2nnefm_689"><p>zrangebyscore</p></li><li class="list__item" id="i2nnefm_690"><p>zscore</p></li><li class="list__item" id="i2nnefm_691"><p>zrank</p></li><li class="list__item" id="i2nnefm_692"><p>zincrby 实时维护</p></li><li class="list__item" id="i2nnefm_693"><p>交集并集差集 </p><ul class="list _bullet" id="i2nnefm_694"><li class="list__item" id="i2nnefm_695"><p>zunionstore weights 聚合指令</p></li></ul></li><li class="list__item" id="i2nnefm_696"><p>zremovebyscore</p></li><li class="list__item" id="i2nnefm_697"><p>zremovebyrank </p><ul class="list _bullet" id="i2nnefm_698"><li class="list__item" id="i2nnefm_699"><p>滑动窗口</p></li></ul></li></ul></li></ul></section></section><section class="chapter"><h2 id="i2nnefm_700" data-toc="i2nnefm_700">进阶</h2><section class="chapter"><h3 id="i2nnefm_701" data-toc="i2nnefm_701">管道</h3><ul class="list _bullet" id="i2nnefm_702"><li class="list__item" id="i2nnefm_703"><p><code class="code" id="i2nnefm_704">echo -n &quot;set k1 99\n incr k1 \n get k1&quot; | nc xxxx 6379</code></p><ul class="list _bullet" id="i2nnefm_705"><li class="list__item" id="i2nnefm_706"><p>建立tcp通信就能跟redis对话</p></li></ul></li></ul></section><section class="chapter"><h3 id="i2nnefm_707" data-toc="i2nnefm_707">发布/订阅</h3></section><section class="chapter"><h3 id="i2nnefm_708" data-toc="i2nnefm_708">事务</h3><ul class="list _bullet" id="i2nnefm_709"><li class="list__item" id="i2nnefm_710"><p>transaction </p><ul class="list _bullet" id="i2nnefm_711"><li class="list__item" id="i2nnefm_712"><p>multi 开启事务</p></li><li class="list__item" id="i2nnefm_713"><p>exec 执行事务</p></li><li class="list__item" id="i2nnefm_714"><p>discard 取消事务</p></li><li class="list__item" id="i2nnefm_715"><p>watch </p><ul class="list _bullet" id="i2nnefm_716"><li class="list__item" id="i2nnefm_717"><p>乐观锁</p></li><li class="list__item" id="i2nnefm_718"><p>cas </p><ul class="list _bullet" id="i2nnefm_719"><li class="list__item" id="i2nnefm_720"><p>A </p><ol class="list _decimal" id="i2nnefm_721" type="1"><li class="list__item" id="i2nnefm_722"><p><code class="code" id="i2nnefm_723">watch k1</code></p></li><li class="list__item" id="i2nnefm_724"><p><code class="code" id="i2nnefm_725">multi</code></p></li><li class="list__item" id="i2nnefm_726"><p><code class="code" id="i2nnefm_727">get k1</code></p></li><li class="list__item" id="i2nnefm_728"><p><code class="code" id="i2nnefm_729">keys *</code></p></li></ol></li><li class="list__item" id="i2nnefm_730"><p>B </p><ol class="list _decimal" id="i2nnefm_731" type="1"><li class="list__item" id="i2nnefm_732"><p><code class="code" id="i2nnefm_733">muti</code></p></li><li class="list__item" id="i2nnefm_734"><p><code class="code" id="i2nnefm_735">keys *</code></p></li><li class="list__item" id="i2nnefm_736"><p><code class="code" id="i2nnefm_737">set k1 xxxxx</code></p></li><li class="list__item" id="i2nnefm_738"><p><code class="code" id="i2nnefm_739">exec</code></p></li><li class="list__item" id="i2nnefm_740"><p>A<code class="code" id="i2nnefm_741">exec</code></p><ul class="list _bullet" id="i2nnefm_742"><li class="list__item" id="i2nnefm_743"><p>数据被b修改过</p></li><li class="list__item" id="i2nnefm_744"><p>不执行事务</p></li></ul></li></ol></li></ul></li></ul></li></ul></li><li class="list__item" id="i2nnefm_745"><p>缓存穿透 </p><ul class="list _bullet" id="i2nnefm_746"><li class="list__item" id="i2nnefm_747"><p>module redisbloom </p><ul class="list _bullet" id="i2nnefm_748"><li class="list__item" id="i2nnefm_749"><p>bloom过滤器</p></li><li class="list__item" id="i2nnefm_750"><p>布谷鸟过滤器</p></li><li class="list__item" id="i2nnefm_751"><p>counting bloom</p></li></ul></li><li class="list__item" id="i2nnefm_752"><p>查找没有的东西</p></li></ul></li><li class="list__item" id="i2nnefm_753"><p>缓存和数据库的区别</p></li><li class="list__item" id="i2nnefm_754"><p>config </p><ul class="list _bullet" id="i2nnefm_755"><li class="list__item" id="i2nnefm_756"><p>内存 </p><ul class="list _bullet" id="i2nnefm_757"><li class="list__item" id="i2nnefm_758"><p>回收策略 </p><ul class="list _bullet" id="i2nnefm_759"><li class="list__item" id="i2nnefm_760"><p>noeviction 不丢,做数据库用</p></li><li class="list__item" id="i2nnefm_761"><p>lfu 碰了多少次</p></li><li class="list__item" id="i2nnefm_762"><p>lru 多久没碰</p></li><li class="list__item" id="i2nnefm_763"><p>random</p></li><li class="list__item" id="i2nnefm_764"><p>ttl</p></li></ul></li></ul></li></ul></li><li class="list__item" id="i2nnefm_765"><p><a href="http://www.redis.cn/commands/expire.html" id="i2nnefm_766" data-external="true" rel="noopener noreferrer">有效期</a></p><ul class="list _bullet" id="i2nnefm_767"><li class="list__item" id="i2nnefm_768"><p>ttl 按存活时间来 </p><ul class="list _bullet" id="i2nnefm_769"><li class="list__item" id="i2nnefm_770"><p>ttl + key 存活时间</p></li><li class="list__item" id="i2nnefm_771"><p>key的有效期,访问延长?no</p></li><li class="list__item" id="i2nnefm_772"><p>发生写,会剔除过期时间(没设置新的时间?)</p></li><li class="list__item" id="i2nnefm_773"><p>expire 设置时间(多少秒) </p><ul class="list _bullet" id="i2nnefm_774"><li class="list__item" id="i2nnefm_775"><p>expireat 指定时间(倒计时,且不能延长)</p></li></ul></li></ul></li><li class="list__item" id="i2nnefm_776"><p>被动/主动</p></li></ul></li></ul></section></section><div class="last-modified">Last modified: 30 四月 2024</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom"><a href="tankwar.html" class="navigation-links__next">Tank War 设计</a></div></article><div id="disqus_thread"></div></div></section></main></div><script src="https://resources.jetbrains.com/writerside/apidoc/6.10.0-b259/app.js"></script></body></html>